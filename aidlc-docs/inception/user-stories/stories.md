# 테이블오더 서비스 - User Stories

> 형식: Given-When-Then (BDD)
> 정렬: 사용자 흐름 순서
> 페르소나: 고객(C), 관리자(A)

---

## 1. 고객용 스토리 (Customer Stories)

### 1.1 테이블 자동 로그인 및 세션 관리

#### US-C01: 테이블 태블릿 초기 설정
**As a** 관리자, **I want to** 태블릿에 매장 식별자, 테이블 번호, 비밀번호를 1회 설정할 수 있다, **so that** 고객이 별도 로그인 없이 주문할 수 있다.

**Acceptance Criteria:**
- Given 미설정 태블릿이 있을 때, When 관리자가 매장 식별자/테이블 번호/비밀번호를 입력하고 저장하면, Then 로그인 정보가 로컬에 저장된다
- Given 설정이 완료되었을 때, When 태블릿 브라우저를 열면, Then 저장된 정보로 자동 로그인된다

#### US-C02: 자동 로그인
**As a** 고객, **I want to** 태블릿을 열면 자동으로 로그인되어 있다, **so that** 별도 인증 절차 없이 바로 주문할 수 있다.

**Acceptance Criteria:**
- Given 초기 설정이 완료된 태블릿일 때, When 브라우저를 열면, Then 자동으로 로그인되어 메뉴 화면이 표시된다
- Given 자동 로그인에 실패했을 때, When 에러가 발생하면, Then 관리자에게 재설정을 요청하는 안내 메시지가 표시된다

### 1.2 메뉴 조회 및 탐색

#### US-C03: 카테고리별 메뉴 목록 조회
**As a** 고객, **I want to** 카테고리별로 분류된 메뉴 목록을 볼 수 있다, **so that** 원하는 종류의 메뉴를 쉽게 찾을 수 있다.

**Acceptance Criteria:**
- Given 메뉴 화면에 있을 때, When 페이지가 로드되면, Then 카테고리 탭과 해당 카테고리의 메뉴가 카드 형태로 표시된다
- Given 메뉴 목록이 표시될 때, When 각 메뉴 카드를 보면, Then 메뉴명과 가격이 표시된다

#### US-C04: 카테고리 간 이동
**As a** 고객, **I want to** 카테고리 탭을 눌러 다른 카테고리로 빠르게 이동할 수 있다, **so that** 여러 종류의 메뉴를 편리하게 탐색할 수 있다.

**Acceptance Criteria:**
- Given 메뉴 화면에 있을 때, When 다른 카테고리 탭을 터치하면, Then 해당 카테고리의 메뉴 목록으로 즉시 전환된다

#### US-C05: 메뉴 상세 정보 조회
**As a** 고객, **I want to** 메뉴의 상세 정보(설명, 가격)를 확인할 수 있다, **so that** 주문 전에 메뉴에 대해 충분히 파악할 수 있다.

**Acceptance Criteria:**
- Given 메뉴 목록에서 메뉴 카드를 볼 때, When 메뉴 카드를 터치하면, Then 메뉴명, 가격, 설명이 포함된 상세 정보가 표시된다

### 1.3 장바구니 관리

#### US-C06: 장바구니에 메뉴 추가
**As a** 고객, **I want to** 원하는 메뉴를 장바구니에 추가할 수 있다, **so that** 여러 메뉴를 모아서 한 번에 주문할 수 있다.

**Acceptance Criteria:**
- Given 메뉴 상세 또는 목록 화면에서, When 메뉴 추가 버튼을 터치하면, Then 해당 메뉴가 장바구니에 수량 1로 추가된다
- Given 이미 장바구니에 있는 메뉴일 때, When 같은 메뉴를 다시 추가하면, Then 해당 메뉴의 수량이 1 증가한다

#### US-C07: 장바구니 수량 조절
**As a** 고객, **I want to** 장바구니에 담긴 메뉴의 수량을 조절할 수 있다, **so that** 원하는 만큼 주문할 수 있다.

**Acceptance Criteria:**
- Given 장바구니에 메뉴가 있을 때, When 수량 증가 버튼을 터치하면, Then 수량이 1 증가하고 총 금액이 재계산된다
- Given 장바구니에 수량 2 이상인 메뉴가 있을 때, When 수량 감소 버튼을 터치하면, Then 수량이 1 감소하고 총 금액이 재계산된다
- Given 장바구니에 수량 1인 메뉴가 있을 때, When 수량 감소 버튼을 터치하면, Then 해당 메뉴가 장바구니에서 삭제된다

#### US-C08: 장바구니 메뉴 삭제
**As a** 고객, **I want to** 장바구니에서 특정 메뉴를 삭제할 수 있다, **so that** 원하지 않는 메뉴를 제거할 수 있다.

**Acceptance Criteria:**
- Given 장바구니에 메뉴가 있을 때, When 삭제 버튼을 터치하면, Then 해당 메뉴가 장바구니에서 제거되고 총 금액이 재계산된다

#### US-C09: 장바구니 총 금액 표시
**As a** 고객, **I want to** 장바구니의 총 금액을 실시간으로 확인할 수 있다, **so that** 주문 전에 총 비용을 파악할 수 있다.

**Acceptance Criteria:**
- Given 장바구니에 메뉴가 있을 때, When 수량이 변경되면, Then 총 금액이 즉시 재계산되어 표시된다

#### US-C10: 장바구니 비우기
**As a** 고객, **I want to** 장바구니를 한 번에 비울 수 있다, **so that** 처음부터 다시 메뉴를 선택할 수 있다.

**Acceptance Criteria:**
- Given 장바구니에 메뉴가 있을 때, When 장바구니 비우기 버튼을 터치하면, Then 모든 메뉴가 삭제되고 총 금액이 0이 된다

#### US-C11: 장바구니 로컬 저장
**As a** 고객, **I want to** 페이지를 새로고침해도 장바구니가 유지된다, **so that** 실수로 새로고침해도 담은 메뉴를 잃지 않는다.

**Acceptance Criteria:**
- Given 장바구니에 메뉴가 담겨 있을 때, When 페이지를 새로고침하면, Then 장바구니 내용이 그대로 유지된다

### 1.4 주문 생성

#### US-C12: 주문 내역 최종 확인
**As a** 고객, **I want to** 주문 확정 전에 주문 내역을 최종 확인할 수 있다, **so that** 실수 없이 정확한 주문을 할 수 있다.

**Acceptance Criteria:**
- Given 장바구니에 메뉴가 있을 때, When 주문하기 버튼을 터치하면, Then 주문 메뉴 목록, 수량, 단가, 총 금액이 포함된 확인 화면이 표시된다

#### US-C13: 주문 확정
**As a** 고객, **I want to** 주문을 확정할 수 있다, **so that** 장바구니의 메뉴가 실제 주문으로 전환된다.

**Acceptance Criteria:**
- Given 주문 확인 화면에서, When 주문 확정 버튼을 터치하면, Then 주문이 서버로 전송된다
- Given 주문이 성공했을 때, When 서버 응답을 받으면, Then 주문 번호가 표시되고 장바구니가 비워지고 메뉴 화면으로 자동 리다이렉트된다

#### US-C14: 주문 실패 처리
**As a** 고객, **I want to** 주문 실패 시 에러 메시지를 확인할 수 있다, **so that** 문제를 인지하고 재시도할 수 있다.

**Acceptance Criteria:**
- Given 주문 확정을 시도했을 때, When 서버 에러가 발생하면, Then 에러 메시지가 표시되고 장바구니 내용은 유지된다

### 1.5 주문 내역 조회

#### US-C15: 현재 세션 주문 목록 조회
**As a** 고객, **I want to** 현재 테이블 세션의 주문 내역을 확인할 수 있다, **so that** 지금까지 주문한 내용을 파악할 수 있다.

**Acceptance Criteria:**
- Given 주문 내역 화면에 있을 때, When 페이지가 로드되면, Then 현재 세션의 주문만 시간 순으로 표시된다
- Given 주문 목록이 표시될 때, When 각 주문을 보면, Then 주문 번호, 시각, 메뉴/수량, 금액, 상태가 표시된다
- Given 이전 세션(이용 완료 처리된)의 주문이 있을 때, When 주문 내역을 조회하면, Then 이전 세션 주문은 표시되지 않는다

#### US-C16: 주문 상태 실시간 업데이트
**As a** 고객, **I want to** 주문 상태가 실시간으로 업데이트된다, **so that** 새로고침 없이 주문 진행 상황을 확인할 수 있다.

**Acceptance Criteria:**
- Given 주문 내역 화면에 있을 때, When 관리자가 주문 상태를 변경하면, Then SSE를 통해 상태가 실시간으로 반영된다 (대기중/준비중/완료)

---

## 2. 관리자용 스토리 (Admin Stories)

### 2.1 매장 인증

#### US-A01: 관리자 로그인
**As a** 관리자, **I want to** 매장 식별자, 사용자명, 비밀번호로 로그인할 수 있다, **so that** 매장 관리 시스템에 접근할 수 있다.

**Acceptance Criteria:**
- Given 로그인 화면에서, When 올바른 매장 식별자/사용자명/비밀번호를 입력하고 로그인하면, Then JWT 토큰이 발급되고 대시보드로 이동한다
- Given 로그인 화면에서, When 잘못된 인증 정보를 입력하면, Then 에러 메시지가 표시된다
- Given 로그인 시도 제한을 초과했을 때, When 추가 로그인을 시도하면, Then 일정 시간 동안 로그인이 차단된다

#### US-A02: 세션 유지 및 자동 로그아웃
**As a** 관리자, **I want to** 16시간 동안 세션이 유지되고 이후 자동 로그아웃된다, **so that** 영업 시간 동안 재로그인 없이 사용하면서도 보안이 유지된다.

**Acceptance Criteria:**
- Given 로그인된 상태에서, When 브라우저를 새로고침하면, Then 세션이 유지되어 재로그인이 필요 없다
- Given 로그인 후 16시간이 경과했을 때, When 다음 요청을 보내면, Then 자동 로그아웃되고 로그인 화면으로 이동한다

### 2.2 실시간 주문 모니터링

#### US-A03: 테이블별 주문 대시보드 조회
**As a** 관리자, **I want to** 테이블별 카드 형태의 그리드 대시보드를 볼 수 있다, **so that** 전체 매장의 주문 현황을 한눈에 파악할 수 있다.

**Acceptance Criteria:**
- Given 대시보드 화면에서, When 페이지가 로드되면, Then 테이블별 카드가 그리드 레이아웃으로 표시된다
- Given 각 테이블 카드를 볼 때, When 주문이 있는 테이블이면, Then 테이블 번호, 총 주문액, 최신 주문 미리보기가 표시된다

#### US-A04: 실시간 신규 주문 수신
**As a** 관리자, **I want to** 신규 주문이 실시간으로 대시보드에 표시된다, **so that** 주문을 즉시 확인하고 처리할 수 있다.

**Acceptance Criteria:**
- Given 대시보드를 보고 있을 때, When 고객이 새 주문을 생성하면, Then 2초 이내에 해당 테이블 카드에 주문이 표시된다
- Given 신규 주문이 도착했을 때, When 대시보드에 반영되면, Then 시각적 강조(색상 변경, 애니메이션)로 알림된다

#### US-A05: 주문 상세 보기
**As a** 관리자, **I want to** 테이블 카드를 클릭하여 전체 주문 상세를 볼 수 있다, **so that** 주문의 모든 메뉴와 수량을 확인할 수 있다.

**Acceptance Criteria:**
- Given 대시보드에서 테이블 카드를 볼 때, When 카드를 클릭하면, Then 해당 테이블의 전체 주문 목록(주문 번호, 시각, 메뉴/수량, 금액)이 상세 표시된다

#### US-A06: 주문 상태 변경
**As a** 관리자, **I want to** 주문 상태를 변경할 수 있다 (대기중 → 준비중 → 완료), **so that** 주문 처리 진행 상황을 관리할 수 있다.

**Acceptance Criteria:**
- Given 주문 상세를 보고 있을 때, When 상태 변경 버튼을 클릭하면, Then 주문 상태가 다음 단계로 변경된다
- Given 주문 상태가 변경되었을 때, When 변경이 완료되면, Then 고객 화면에도 SSE를 통해 실시간 반영된다

#### US-A07: 테이블별 필터링
**As a** 관리자, **I want to** 특정 테이블의 주문만 필터링할 수 있다, **so that** 원하는 테이블의 주문에 집중할 수 있다.

**Acceptance Criteria:**
- Given 대시보드에서, When 테이블 필터를 선택하면, Then 선택한 테이블의 주문만 표시된다

### 2.3 테이블 관리

#### US-A08: 테이블 초기 설정
**As a** 관리자, **I want to** 테이블 번호와 비밀번호를 설정할 수 있다, **so that** 해당 테이블의 태블릿이 자동 로그인할 수 있다.

**Acceptance Criteria:**
- Given 테이블 관리 화면에서, When 테이블 번호와 비밀번호를 입력하고 저장하면, Then 테이블 세션이 생성되고 설정 정보가 저장된다

#### US-A09: 주문 삭제
**As a** 관리자, **I want to** 특정 주문을 삭제할 수 있다, **so that** 잘못된 주문을 직권으로 수정할 수 있다.

**Acceptance Criteria:**
- Given 주문 상세에서, When 주문 삭제 버튼을 클릭하면, Then 확인 팝업이 표시된다
- Given 확인 팝업에서, When 삭제를 확인하면, Then 주문이 즉시 삭제되고 테이블 총 주문액이 재계산된다
- Given 삭제가 완료되었을 때, When 결과가 반환되면, Then 성공/실패 피드백이 표시된다

#### US-A10: 테이블 이용 완료 처리
**As a** 관리자, **I want to** 테이블 세션을 종료(이용 완료)할 수 있다, **so that** 새 고객이 이전 주문 없이 시작할 수 있다.

**Acceptance Criteria:**
- Given 테이블 카드에서, When 이용 완료 버튼을 클릭하면, Then 확인 팝업이 표시된다
- Given 확인 팝업에서, When 이용 완료를 확인하면, Then 현재 세션 주문이 과거 이력으로 이동하고 테이블 주문 목록/총액이 0으로 리셋된다
- Given 이용 완료 후, When 새 고객이 주문하면, Then 새로운 세션이 시작되고 이전 주문은 보이지 않는다

#### US-A11: 과거 주문 내역 조회
**As a** 관리자, **I want to** 테이블의 과거 주문 내역을 조회할 수 있다, **so that** 이전 세션의 주문 이력을 확인할 수 있다.

**Acceptance Criteria:**
- Given 테이블 카드에서, When 과거 내역 버튼을 클릭하면, Then 해당 테이블의 과거 주문 목록이 시간 역순으로 표시된다
- Given 과거 내역 화면에서, When 각 주문을 보면, Then 주문 번호, 시각, 메뉴 목록, 총 금액, 이용 완료 시각이 표시된다
- Given 과거 내역 화면에서, When 날짜 필터를 적용하면, Then 해당 날짜의 주문만 표시된다
- Given 과거 내역 화면에서, When 닫기 버튼을 클릭하면, Then 대시보드로 복귀한다

### 2.4 메뉴 관리

#### US-A12: 메뉴 목록 조회
**As a** 관리자, **I want to** 카테고리별로 메뉴 목록을 조회할 수 있다, **so that** 현재 등록된 메뉴를 파악할 수 있다.

**Acceptance Criteria:**
- Given 메뉴 관리 화면에서, When 페이지가 로드되면, Then 카테고리별로 분류된 메뉴 목록이 표시된다

#### US-A13: 메뉴 등록
**As a** 관리자, **I want to** 새 메뉴를 등록할 수 있다, **so that** 매장의 메뉴를 추가할 수 있다.

**Acceptance Criteria:**
- Given 메뉴 관리 화면에서, When 메뉴명, 가격, 설명, 카테고리를 입력하고 저장하면, Then 새 메뉴가 등록된다
- Given 필수 필드가 비어있을 때, When 저장을 시도하면, Then 검증 에러 메시지가 표시된다
- Given 가격이 유효 범위를 벗어날 때, When 저장을 시도하면, Then 가격 범위 검증 에러가 표시된다

#### US-A14: 메뉴 수정
**As a** 관리자, **I want to** 기존 메뉴 정보를 수정할 수 있다, **so that** 메뉴 내용을 최신 상태로 유지할 수 있다.

**Acceptance Criteria:**
- Given 메뉴 목록에서 메뉴를 선택했을 때, When 정보를 수정하고 저장하면, Then 변경 사항이 반영되고 고객 화면에도 업데이트된다

#### US-A15: 메뉴 삭제
**As a** 관리자, **I want to** 메뉴를 삭제할 수 있다, **so that** 더 이상 제공하지 않는 메뉴를 제거할 수 있다.

**Acceptance Criteria:**
- Given 메뉴 목록에서 메뉴를 선택했을 때, When 삭제 버튼을 클릭하면, Then 확인 후 메뉴가 삭제되고 고객 화면에서도 제거된다

#### US-A16: 메뉴 노출 순서 조정
**As a** 관리자, **I want to** 메뉴의 노출 순서를 조정할 수 있다, **so that** 고객에게 원하는 순서로 메뉴를 보여줄 수 있다.

**Acceptance Criteria:**
- Given 메뉴 관리 화면에서, When 메뉴의 순서를 변경하고 저장하면, Then 고객 화면에서 변경된 순서로 메뉴가 표시된다

---

## 3. 페르소나-스토리 매핑

| 페르소나 | 스토리 |
|----------|--------|
| **고객** | US-C01~C16 (16개) |
| **관리자** | US-A01~A16 (16개) |

**총 스토리 수**: 32개 (고객 16개 + 관리자 16개)

---

## 4. INVEST 검증

| 기준 | 충족 여부 | 설명 |
|------|-----------|------|
| **Independent** | ✅ | 각 스토리가 독립적으로 구현/테스트 가능 |
| **Negotiable** | ✅ | Acceptance Criteria 내에서 구현 방식 협상 가능 |
| **Valuable** | ✅ | 각 스토리가 사용자에게 명확한 가치 제공 |
| **Estimable** | ✅ | 범위가 명확하여 추정 가능 |
| **Small** | ✅ | 세부 기능 단위로 분리되어 적절한 크기 |
| **Testable** | ✅ | Given-When-Then으로 테스트 가능한 기준 명시 |
